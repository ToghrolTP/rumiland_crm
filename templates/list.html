{% extends "base.html" %} {% block title %}ูุณุช ูุดุชุฑุงู{% endblock %} {% block
content %}
<div class="page-header">
    <div class="page-title">
        <h1>ูุดุชุฑุงู</h1>
        <span class="badge badge-info">{{ customers.len() }} ูุดุชุฑ</span>
    </div>
    <div class="page-actions">
        <a href="/add" class="btn btn-primary">
            <span>โ</span>
            <span>ูุดุชุฑ ุฌุฏุฏ</span>
        </a>
        <a href="/export/customers" class="btn btn-secondary">
            <span>๐</span>
            <span>ุฎุฑูุฌ ุงฺฉุณู</span>
        </a>
    </div>
</div>

{% if flash_message.is_some() %}
<div class="flash-message flash-success {% if flash_message.as_ref().unwrap().contains("โ") %}with-actions{% endif %}">
    <span class="flash-icon">โ</span>
    <span class="flash-text">{{ flash_message.as_ref().unwrap() }}</span>
    <button type="button" class="flash-close" onclick="this.parentElement.style.display='none'">
        <span>โ</span>
    </button>
    {% if flash_message.as_ref().unwrap().contains("ุจุง ููููุช ุงุถุงูู ุดุฏ") %}
    <div class="flash-actions">
        <a href="/add" class="quick-action-btn">
            <span>โ</span>
            <span>ุงูุฒูุฏู ูุดุชุฑ ุฏฺฏุฑ</span>
        </a>
        <a href="/add?batch=true" class="quick-action-btn">
            <span>๐</span>
            <span>ูุฑูุฏ ุฏุณุชูโุง</span>
        </a>
    </div>
    {% endif %}
</div>
{% endif %}

{% if customers.is_empty() %}
<div class="card empty-state">
    <div class="empty-icon">๐ญ</div>
    <h3 class="empty-title">ูููุฒ ูุดุชุฑโุง ุซุจุช ูุดุฏู</h3>
    <p class="empty-description">
        ุงููู ูุดุชุฑ ุฎูุฏ ุฑุง ุงุถุงูู ฺฉูุฏ ุชุง ุดุฑูุน ุจู ูุฏุฑุช ุงุฑุชุจุงุทุงุช ฺฉูุฏ.
    </p>
    <a href="/add" class="btn btn-primary btn-lg">
        <span>โ</span>
        <span>ุงูุฒูุฏู ุงููู ูุดุชุฑ</span>
    </a>
    
</div>
</div>
{% else %}
<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>ูุงู</th>
                <th >ุดุฑฺฉุช</th>
                <!-- <th>ุงูู</th> -->
                <th>ุชููู</th>
                <th>ุชุนุฏุงุฏ ูุฑูุด</th>
                <!-- <th>ุชุงุฑุฎ ุฎุฑุฏ</th> -->
                <th>ุณูุช ุดุบู</th>
                <th>ูููุนุช ูฺฉุงู</th>
                <th>ุนููุงุช</th>
            </tr>
        </thead>
        <tbody>
            {% for customer in customers %}
            <tr">
                <td>
                    <strong><a href="/customer/{{ customer.id }}">{{ customer.full_name }}</a></strong>
                </td>
                <td class="auto-fit">{{ customer.company }}</td>
                <!-- <td>
                    <a href="mailto:{{ customer.email }}" class="text-small">
                        {{ customer.email }}
                    </a>
                </td> -->
                <td class="auto-fit">
                    <span class="phone-number text-small">{{ customer.formatted_phone() }}</span>
                </td>
                <td class="auto-fit">{{ customer.sales_count }}</td>
                <td class="auto-fit">
                    {% if customer.job_title.is_empty() %}
                        <span class="text-muted">--</span>
                    {% else %}
                        {{ customer.job_title }}
                    {% endif %}
                </td>
                <td class="auto-fit">
                    {% if customer.coordinates.is_empty() %}
                        <span class="text-muted">--</span>
                    {% else %}
                        <a href="geo:{{ customer.coordinates }}" class="link-style">
                            <span>๐</span>
                            <span>ููุงุด ุฑู ููุดู</span>
                        </a>
                    {% endif %}
                </td>
                <td>
                    <div class="table-actions">
                        <a
                            href="/customer/{{ customer.id }}"
                            class="btn btn-ghost btn-sm"
                        >
                            ูุดุงูุฏู
                        </a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %} {% endblock %}
