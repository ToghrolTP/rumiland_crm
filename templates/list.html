{% extends "base.html" %} {% block title %}Ù„ÛŒØ³Øª Ù…Ø´ØªØ±ÛŒØ§Ù†{% endblock %} {% block
content %}
<div class="page-header">
    <div class="page-title">
        <h1>Ù…Ø´ØªØ±ÛŒØ§Ù†</h1>
        <span class="badge badge-info">{{ customers.len() }} Ù…Ø´ØªØ±ÛŒ</span>
    </div>
    <div class="page-actions">
        <a href="/add" class="btn btn-primary">
            <span>â•</span>
            <span>Ù…Ø´ØªØ±ÛŒ Ø¬Ø¯ÛŒØ¯</span>
        </a>
    </div>
</div>

{% if flash_message.is_some() %}
<div class="flash-message flash-success {% if flash_message.as_ref().unwrap().contains("âœ…") %}with-actions{% endif %}">
    <span class="flash-icon">âœ…</span>
    <span class="flash-text">{{ flash_message.as_ref().unwrap() }}</span>
    <button type="button" class="flash-close" onclick="this.parentElement.style.display='none'">
        <span>âœ•</span>
    </button>
    {% if flash_message.as_ref().unwrap().contains("Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯") %}
    <div class="flash-actions">
        <a href="/add" class="quick-action-btn">
            <span>â•</span>
            <span>Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø´ØªØ±ÛŒ Ø¯ÛŒÚ¯Ø±</span>
        </a>
        <a href="/add?batch=true" class="quick-action-btn">
            <span>ğŸ“Š</span>
            <span>ÙˆØ±ÙˆØ¯ Ø¯Ø³ØªÙ‡â€ŒØ§ÛŒ</span>
        </a>
    </div>
    {% endif %}
</div>
{% endif %}

{% if customers.is_empty() %}
<div class="card empty-state">
    <div class="empty-icon">ğŸ“­</div>
    <h3 class="empty-title">Ù‡Ù†ÙˆØ² Ù…Ø´ØªØ±ÛŒâ€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</h3>
    <p class="empty-description">
        Ø§ÙˆÙ„ÛŒÙ† Ù…Ø´ØªØ±ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯ ØªØ§ Ø´Ø±ÙˆØ¹ Ø¨Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø±ØªØ¨Ø§Ø·Ø§Øª Ú©Ù†ÛŒØ¯.
    </p>
    <a href="/add" class="btn btn-primary btn-lg">
        <span>â•</span>
        <span>Ø§ÙØ²ÙˆØ¯Ù† Ø§ÙˆÙ„ÛŒÙ† Ù…Ø´ØªØ±ÛŒ</span>
    </a>
</div>
{% else %}
<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>Ù†Ø§Ù…</th>
                <th >Ø´Ø±Ú©Øª</th>
                <!-- <th>Ø§ÛŒÙ…ÛŒÙ„</th> -->
                <th>ØªÙ„ÙÙ†</th>
                <th>ØªØ¹Ø¯Ø§Ø¯ ÙØ±ÙˆØ´</th>
                <th>Ù†Ø­ÙˆÙ‡ ØªØ³ÙˆÛŒÙ‡</th>
                <th>ØªØ§Ø±ÛŒØ® Ø®Ø±ÛŒØ¯</th>
                <th>Ø³Ù…Øª Ø´ØºÙ„ÛŒ</th>
                <th>Ø¢Ø¯Ø±Ø³</th>
                <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
            </tr>
        </thead>
        <tbody>
            {% for customer in customers %}
            <tr">
                <td>
                    <strong><a href="/customer/{{ customer.id }}">{{ customer.full_name }}</a></strong>
                </td>
                <td class="auto-fit">{{ customer.company }}</td>
                <!-- <td>
                    <a href="mailto:{{ customer.email }}" class="text-small">
                        {{ customer.email }}
                    </a>
                </td> -->
                <td class="auto-fit">
                    <span class="phone-number text-small">{{ customer.formatted_phone() }}</span>
                </td>
                <td class="auto-fit">{{ customer.sales_count }}</td>
                <td class="auto-fit">{{ customer.settlement_method_display_name() }}</td>
                <td class="auto-fit">
                    {% if customer.purchase_date.is_empty() %}
                        <span class="text-muted">--</span>
                    {% else %}
                        {{ customer.purchase_date_shamsi() }}
                    {% endif %}
                </td>
                <td class="auto-fit">
                    {% if customer.job_title.is_empty() %}
                        <span class="text-muted">--</span>
                    {% else %}
                        {{ customer.job_title }}
                    {% endif %}
                </td>
                <td class="auto-fit">
                    {% if customer.address.is_empty() %}
                        <span class="text-muted">--</span>
                    {% else if customer.city.is_empty() %}
                        {{ customer.address }}
                    {% else %}
                        {{ customer.city_display_name() }} - {{ customer.address }}
                    {% endif %}
                </td>
                <td>
                    <div class="table-actions">
                        <a
                            href="/customer/{{ customer.id }}"
                            class="btn btn-ghost btn-sm"
                        >
                            Ù…Ø´Ø§Ù‡Ø¯Ù‡
                        </a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %} {% endblock %}
