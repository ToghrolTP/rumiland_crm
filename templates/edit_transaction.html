{% extends "base.html" %}
{% block title %}ÙˆÛŒØ±Ø§ÛŒØ´ ØªØ±Ø§Ú©Ù†Ø´ Ø¨Ø±Ø§ÛŒ {{ customer.full_name }}{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ÙˆÛŒØ±Ø§ÛŒØ´ ØªØ±Ø§Ú©Ù†Ø´</h1>
    <p class="text-muted" style="margin-top: -0.5rem;">Ø¨Ø±Ø§ÛŒ Ù…Ø´ØªØ±ÛŒ: <strong>{{ customer.full_name }}</strong></p>
</div>

<div class="card">
    <form method="POST" action="/customer/{{ customer.id }}/edit-transaction/{{ transaction.id }}">
        <div class="form-group">
            <label for="amount" class="form-label">Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†) *</label>
            <input
                type="number"
                id="amount"
                name="amount"
                class="form-input"
                required
                autofocus
                value="{{ transaction.amount }}"
            />
        </div>

        <div class="form-group">
            <label for="transaction_type" class="form-label">Ù†ÙˆØ¹ ØªØ±Ø§Ú©Ù†Ø´ *</label>
            <select id="transaction_type" name="transaction_type" class="form-input" required>
                {% for type in transaction_types %}
                    <option value="{{ type.as_str() }}" {% if type.as_str() == transaction.transaction_type %}selected{% endif %}>
                        {{ type.display_name() }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="transaction_date" class="form_label">ØªØ§Ø±ÛŒØ® ØªØ±Ø§Ú©Ù†Ø´ *</label>
            <input
                type="text"
                id="transaction_date"
                name="transaction_date"
                class="form-input"
                required
                autocomplete="off"
                value="{{ transaction.formatted_date_shamsi() }}"
            />
             <p class="form-hint">
                Ø§Ø² ØªÙ‚ÙˆÛŒÙ… Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ ØªØ§Ø±ÛŒØ® Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
            </p>
        </div>

        <div class="form-group">
            <label for="description" class="form-label">ØªÙˆØ¶ÛŒØ­Ø§Øª</label>
            <textarea
                id="description"
                name="description"
                class="form-textarea"
                rows="3"
                placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø®ØªÛŒØ§Ø±ÛŒ Ø¯Ø± Ù…ÙˆØ±Ø¯ ØªØ±Ø§Ú©Ù†Ø´..."
            >{{ transaction.description.as_deref().unwrap_or("") }}</textarea> </div>

        <div class="form-group form-button-group">
            <button
                type="submit"
                class="btn btn-primary btn-lg"
                style="flex: 1"
            >
                <span class="btn-content">
                    <span class="btn-icon">ğŸ’¾</span>
                    <span class="btn-text">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</span>
                </span>
            </button>
            <a href="/customer/{{ customer.id }}" class="btn btn-ghost btn-lg">
                Ø§Ù†ØµØ±Ø§Ù
            </a>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_scripts %}
<script type="text/javascript">
    $(document).ready(function () {
        $("#transaction_date").pDatepicker({
            format: "YYYY/MM/DD",
            autoClose: true,
        });
    });
</script>
{% endblock %}